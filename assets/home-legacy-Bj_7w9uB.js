System.register(["./index-legacy-oZhpELhF.js","./device-legacy-BI5IwhLE.js","./index-legacy-Doy9qqQB.js"],(function(e,a){"use strict";var t,s,l,o,i,n,d,c,p,r,v,u,b,m,f,g,x,h,w,k,y,C,_,V,N,A,M,z,j,I;return{setters:[e=>{t=e.a,s=e._,l=e.r,o=e.w,i=e.o,n=e.c,d=e.n,c=e.u,p=e.s,r=e.b,v=e.N,u=e.d,b=e.e,m=e.i,f=e.f,g=e.t,x=e.g,h=e.h,w=e.F,k=e.j,y=e.k,C=e.l,_=e.m,V=e.p,N=e.q,A=e.v},e=>{M=e.g,z=e.a,j=e.b},e=>{I=e.c}],execute:function(){var a=document.createElement("style");a.textContent=".map[data-v-2ead57cb]{width:100%;height:100%}[data-v-2ead57cb] .custom-content-marker{position:relative}[data-v-2ead57cb] .custom-content-marker img{width:25px;height:25px}.g-content[data-v-be341ef6]{position:relative;padding-bottom:70px}.abs[data-v-be341ef6]{z-index:10;position:fixed;top:40px;left:0}.abs .toggletext[data-v-be341ef6]{color:#fff;font-size:16px}.abs .arc-box[data-v-be341ef6]{width:100vw;background:var(--primary);height:140px;border-bottom-left-radius:26px;border-bottom-right-radius:26px}.abs .arc-box .iconfont[data-v-be341ef6]{font-size:12px;margin-left:2px}.abs .map-box[data-v-be341ef6]{position:absolute;top:60px;left:12px;width:calc(100vw - 24px);height:200px;background:#ddd;border-radius:8px;overflow:hidden}.abs .map-box .map-tit[data-v-be341ef6]{border-radius:6px;padding:5px;background:#ddd;z-index:10000;position:absolute;right:15px;top:10px}.abs .map-box .map-tit .iconfont[data-v-be341ef6]{font-size:12px;color:#666}.abs .map-box .map-list[data-v-be341ef6]{border-radius:8px;padding:6px 4px 6px 8px;background:var(--color-green-light);z-index:10000;position:absolute;right:0;bottom:0}.abs .map-box .map-list i[data-v-be341ef6]{vertical-align:middle}[data-v-be341ef6] .van-haptics-feedback.van-dropdown-menu__item{background:var(--primary);justify-content:flex-start}[data-v-be341ef6] .van-haptics-feedback.van-dropdown-menu__item .van-dropdown-menu__title{color:#fff!important}.user-list[data-v-be341ef6]{margin-top:280px;padding:0 12px}.user-list .tit[data-v-be341ef6]{color:#6e6e6e;margin-bottom:10px}.user-list .g-active-background[data-v-be341ef6],.user-list .shadow-card[data-v-be341ef6]{padding:15px 12px}.user-list .shadow-card .g-btn[data-v-be341ef6]{width:60px}.device-popup .pop-tit[data-v-be341ef6]{background:#fff;position:sticky;top:0;height:50px}.device-popup .pop-scroll[data-v-be341ef6]{overflow-y:auto;height:calc(60vh - 50px)}.device-popup .pop-scroll .pop-item[data-v-be341ef6]{padding:15px;border-bottom:1px solid rgba(238,238,238,.9333333333)}\n",document.head.appendChild(a);const O=["id"],P=s({__name:"CurrAmap",props:{device:{type:Object,default:()=>{}}},setup(e,{expose:a}){const t=l(null),s=l("");o((()=>e.device.sn),(e=>{c()}));const c=()=>{s.value=`AMap${(new Date).getTime()}`,d((()=>{e.device.sn?p():t.value&&t.value.clearMap()}))},p=()=>{M({sn:e.device.sn}).then((e=>{const a=e?.data??"",l=JSON.parse(a)?.point?.coordinates??[];let o=new AMap.Marker({position:new AMap.LngLat(...l),content:'<div class="custom-content-marker"><img src="https://mhjy-public.obs.cn-south-1.myhuaweicloud.com:443/position.png"></div>',offset:new AMap.Pixel(-15,-15)});o.on("click",(()=>{t.value.setZoomAndCenter(18,location)})),t.value?(t.value.add(o),t.value.setZoomAndCenter(18,location)):(t.value=new AMap.Map(s.value,{resizeEnable:!0,center:l,zoom:18,mapStyle:"amap://styles/light"}),t.value.on("complete",(function(){t.value.add(o)})))}))};return a({initMap:c}),(e,a)=>(i(),n("div",{id:s.value,class:"map"},null,8,O))}},[["__scopeId","data-v-2ead57cb"]]),S={class:"g-content"},T={class:"abs"},U={class:"arc-box"},B={class:"map-box"},E={key:0},R={key:1},q={class:"user-list"},D={class:"g-active-background"},L={class:"f16"},Z={class:"g-flex c66 m-t-15"},$={class:"flex1"},F={class:"g-flex c66 m-t-5"},J={class:"flex1"},G={class:"flex1"},H={class:"g-flex c66 m-t-5"},K={class:"flex1"},Q={class:"flex1"},W={class:"g-row-between c66 m-t-5"},X={class:"flex1"},Y={class:"tit m-t-20 g-row-between"},ee={class:"c33 g-row-between"},ae={class:"fs0"},te={key:0,class:"g-tag b-green"},se={key:1,class:"g-tag b-blue"},le={key:2,class:"g-tag b-green-light"},oe={key:3,class:"g-tag b-gray"},ie=["onClick"],ne={class:"c66 m-t-5"},de={class:"c66 m-t-5"},ce=["onClick"],pe={class:"device-popup"},re={class:"pop-scroll"},ve=["onClick"],ue={class:"device-popup"},be={class:"pop-scroll"},me=["onClick"];e("default",s({__name:"home",setup(e){const a=A(),s=c(),{setUser:d}=s,{storePhone:M,storeUser:O}=p(s),fe=r((()=>O.value.id)),ge=r((()=>O.value.name)),xe=l([]);let he=l([]),we=l([]),ke=l({}),ye=l({bloodOxygenValue:"",bloodPressureValue:"",heartRateValue:"",sleepValue:"",stepNumberValue:"",time:""}),Ce=l(!1),_e=l(!1);const Ve=()=>{var e;(e={phone:M.value},t({url:"/bbyl/queryCurElders",method:"get",params:e})).then((e=>{xe.value=e.data})).finally((()=>{v.done()}))},Ne=(e,t={})=>{a.push({name:e,params:t})},Ae=()=>{Ve(),z({elderId:fe.value,elderType:0}).then((e=>{he.value=e.data,ke.value=e.data?.[0]??{}})),z({elderId:fe.value}).then((e=>{we.value=e.data}))};return s.$subscribe(((e,a)=>{v.start(),Ae()})),u((()=>{v.start(),Ae()})),o(ke,(e=>{var a;ye.value={bloodOxygenValue:"",bloodPressureValue:"",heartRateValue:"",sleepValue:"",stepNumberValue:"",time:""},e.id&&(a=e.sn,j({sn:a}).then((e=>{ye.value=e.data})))}),{deep:!0,immediate:!0}),(e,a)=>{const t=C("van-icon"),s=C("Tabbar"),l=C("van-popup");return i(),n(w,null,[b("div",S,[b("div",T,[b("div",U,[b("div",{onClick:a[0]||(a[0]=e=>m(Ce)?Ce.value=!0:Ce=!0),class:"c-white p-l-15 p-t-20 f16"},[f(g(ge.value)+" ",1),a[6]||(a[6]=b("span",{class:"iconfont icon-arrdown"},null,-1))])]),b("div",B,[b("div",{class:"map-tit",onClick:a[1]||(a[1]=e=>m(_e)?_e.value=!0:_e=!0)},[x(ke).deviceName?(i(),n("span",E,g(x(ke).deviceName),1)):(i(),n("span",R,"选择设备")),a[7]||(a[7]=b("span",{class:"iconfont icon-arrdown m-l-5"},null,-1))]),b("div",{class:"map-list c-white",onClick:a[2]||(a[2]=e=>Ne("locations",{sn:x(ke).sn}))},[a[8]||(a[8]=f(" 定位记录 ")),h(t,{name:"arrow"})]),h(P,{ref:"refAmap",device:x(ke)},null,8,["device"])])]),b("div",q,[a[12]||(a[12]=b("div",{class:"tit"},"健康信息",-1)),b("div",D,[b("div",L,g(ge.value),1),b("div",Z,[a[9]||(a[9]=b("div",{class:"flex1"},"体温：无字段",-1)),b("div",$,"睡眠： "+g(x(ye).sleepValue),1)]),b("div",F,[b("div",J,"血压： "+g(x(ye).bloodPressureValue),1),b("div",G,"心率： "+g(x(ye).heartRateValue)+"次/分",1)]),b("div",H,[b("div",K,"血氧： "+g(x(ye).bloodOxygenValue),1),b("div",Q,"步数："+g(x(ye).stepNumberValue)+"步",1)]),b("div",W,[b("div",X,"检测时间："+g(x(ye).time),1),b("div",{class:"fs0 c-green-light",onClick:a[3]||(a[3]=e=>Ne("health",{sn:x(ke).sn}))},[a[10]||(a[10]=f("查看详情")),h(t,{name:"arrow"})])])]),b("div",Y,[a[11]||(a[11]=b("div",null,"设备信息",-1)),b("div",null,"设备数："+g(x(we).length),1)]),(i(!0),n(w,null,k(x(we),((e,a)=>(i(),n("div",{class:"shadow-card",key:a},[b("div",ee,[b("div",null,"设备名称："+g(e.deviceName),1),b("div",ae,["平安通设备"===e.deviceBusiness?(i(),n("span",te,"平安通")):_("",!0),"居家设备"===e.deviceBusiness?(i(),n("span",se,"居家")):_("",!0),"true"===e.online?(i(),n("span",le,"在线")):_("",!0),"false"===e.online?(i(),n("span",oe,"下线")):_("",!0)])]),b("div",{class:"c66 m-t-15",onClick:a=>x(I)(e.sn)},"设备SN/ID："+g(e.sn),9,ie),b("div",ne,"绑定时间： "+g(e.createTime),1),b("div",de,"绑定人： "+g(e.createBy),1),b("div",{class:"g-btn m-t-20",onClick:a=>Ne("alert",{sn:e.sn})},"告警信息",8,ce)])))),128))])]),h(s),h(l,{show:x(_e),"onUpdate:show":a[4]||(a[4]=e=>m(_e)?_e.value=e:_e=e),position:"bottom",style:{height:"60vh"},closeable:"","close-icon":"close",round:"","safe-area-inset-bottom":""},{default:y((()=>[b("div",pe,[a[13]||(a[13]=b("div",{class:"f18 g-flex pop-tit"},"选择设备",-1)),b("div",re,[(i(!0),n(w,null,k(x(he),((e,a)=>(i(),n("div",{class:V(["pop-item f16",{"c-green":x(ke).id==e.id}]),key:a,onClick:a=>(e=>{ke.value=e,_e.value=!1})(e)},[f(g(e.deviceName)+" ",1),h(t,{class:"m-l-10",name:"success",color:"#239959"})],10,ve)))),128))])])])),_:1},8,["show"]),h(l,{show:x(Ce),"onUpdate:show":a[5]||(a[5]=e=>m(Ce)?Ce.value=e:Ce=e),position:"bottom",style:{height:"60vh"},closeable:"","close-icon":"close",round:"","safe-area-inset-bottom":""},{default:y((()=>[b("div",ue,[a[14]||(a[14]=b("div",{class:"f18 g-flex pop-tit"},"选择长者",-1)),b("div",be,[(i(!0),n(w,null,k(xe.value,((e,a)=>(i(),n("div",{class:V(["pop-item f16",{"c-green":fe.value==e.id}]),key:a,onClick:a=>(e=>{Ce.value=!1,d(e)})(e)},[f(g(e.name)+" ",1),fe.value==e.id?(i(),N(t,{key:0,class:"m-l-10",name:"success",color:"#239959"})):_("",!0)],10,me)))),128))])])])),_:1},8,["show"])],64)}}},[["__scopeId","data-v-be341ef6"]]))}}}));
