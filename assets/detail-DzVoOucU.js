import{_ as w,r as u,d as D,c as T,e as r,h as o,f as k,t as v,k as n,q as P,m as O,N as U,l as d,o as p,D as j,B as M,g as q,F as z,j as E}from"./index-Cjm7IUtJ.js";import{c as G}from"./index-CEJ9UQZg.js";import{g as $,F as I,b as H,t as J}from"./index-CPTxUCs2.js";const K={class:"trouble-detail"},Q={class:"background"},R={class:"trouble-class"},W={class:"content",id:"content"},X={__name:"detail",props:{troubleId:{type:Object,default:()=>{}}},setup(V){const c=u(!1),i=u(""),m=u(""),a=u({status:1}),_=u(0),b=u([]),g=u(0),h=s=>{i.value="",y()},y=()=>{i.value="",m.value="",b.value=[],U.start(),c.value=!0,$({troubleId:V.troubleId}).then(s=>{var e;a.value=s.data,i.value=I(H,s.data.troubleType),m.value=I(J,s.data.status),console.log("🚀 ~ getTroubleInfo ~ troubleStatusName.value:",m.value),b.value=(e=s.data.listTroubleOrderApprove)!=null?e:[],g.value=s.data.listTroubleOrderApprove.length-1}).finally(()=>{U.done(),c.value=!1})};return D(()=>{V.troubleId&&y()}),(s,e)=>{const x=d("van-icon"),t=d("van-field"),f=d("van-cell-group"),B=d("van-form"),N=d("van-tab"),C=d("van-step"),A=d("van-steps"),F=d("van-tabs"),S=d("van-loading");return p(),T("div",K,[r("div",Q,[r("div",R,[o(x,{name:"warning",color:"#fff"}),k(" "+v(m.value),1)])]),r("div",W,[o(F,{active:_.value,"onUpdate:active":e[13]||(e[13]=l=>_.value=l),onClickTab:h},{default:n(()=>[o(N,{title:"基础信息"},{default:n(()=>[o(B,{ref_key:"troubleInfo",ref:a,"input-align":"right","error-message-align":"right"},{default:n(()=>[o(f,{title:"基础信息",class:"marginBottom10 vanCellGroup"},{default:n(()=>[o(t,{readonly:"",name:"misisdn",modelValue:a.value.orderId,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.orderId=l),label:"故障单编号",placeholder:""},null,8,["modelValue"]),o(t,{readonly:"",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),label:"故障类型",placeholder:""},null,8,["modelValue"]),o(t,{readonly:"",name:"clientName",modelValue:a.value.clientName,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.clientName=l),label:"客户名称",placeholder:""},null,8,["modelValue"]),o(t,{readonly:"",name:"reportPhone",modelValue:a.value.reportPhone,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.reportPhone=l),label:"报障电话",placeholder:""},null,8,["modelValue"]),o(t,{readonly:"",name:"reportAddress",modelValue:a.value.reportAddress,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.reportAddress=l),label:"报障地址",placeholder:""},null,8,["modelValue"]),o(t,{readonly:"",name:"visitTime",modelValue:a.value.visitTime,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.visitTime=l),label:"计划上门时间",placeholder:""},null,8,["modelValue"]),o(t,{readonly:"",name:"description",modelValue:a.value.description,"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.description=l),label:"故障描述",placeholder:""},null,8,["modelValue"])]),_:1}),o(f,{title:"设备信息",class:"marginBottom10"},{default:n(()=>[o(t,{readonly:"",name:"deviceName",modelValue:a.value.deviceName,"onUpdate:modelValue":e[7]||(e[7]=l=>a.value.deviceName=l),label:"设备名称",placeholder:""},null,8,["modelValue"]),o(t,{readonly:"",name:"deviceNo",modelValue:a.value.deviceNo,"onUpdate:modelValue":e[8]||(e[8]=l=>a.value.deviceNo=l),label:"设备型号",placeholder:""},null,8,["modelValue"]),o(t,{readonly:"",name:"phone",modelValue:a.value.phone,"onUpdate:modelValue":e[9]||(e[9]=l=>a.value.phone=l),label:"设备号码",placeholder:""},null,8,["modelValue"])]),_:1}),o(f,{title:"维修人员信息",class:"marginBottom10"},{default:n(()=>[o(t,{readonly:"",name:"disposePerson",modelValue:a.value.disposePerson,"onUpdate:modelValue":e[10]||(e[10]=l=>a.value.disposePerson=l),label:"人员名称",placeholder:""},null,8,["modelValue"]),o(t,{readonly:"",name:"disposePhone",modelValue:a.value.disposePhone,"onUpdate:modelValue":e[12]||(e[12]=l=>a.value.disposePhone=l),label:"联系电话",placeholder:""},j({_:2},[a.value.disposePhone?{name:"button",fn:n(()=>[r("span",{class:"iconfont icon-copy",onClick:e[11]||(e[11]=M(l=>q(G)(a.value.disposePhone),["stop"]))})]),key:"0"}:void 0]),1032,["modelValue"])]),_:1})]),_:1},512)]),_:1}),o(N,{title:"工单动态"},{default:n(()=>[o(A,{direction:"vertical",active:g.value,"active-icon":"checked","active-color":"#269e3d"},{default:n(()=>[(p(!0),T(z,null,E(b.value,(l,L)=>(p(),P(C,{key:L},{default:n(()=>[r("h3",null,v(l.disposePerson),1),r("p",null,v(l.link),1),r("p",null,v(l.disposeTime),1)]),_:2},1024))),128))]),_:1},8,["active"])]),_:1})]),_:1},8,["active"])]),c.value?(p(),P(S,{key:0,class:"loading",size:"40px",vertical:""},{default:n(()=>e[14]||(e[14]=[k("加载中...")])),_:1})):O("",!0)])}}},le=w(X,[["__scopeId","data-v-70663691"]]);export{le as default};
