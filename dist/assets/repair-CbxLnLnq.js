import{_ as z,r as f,u as $,s as j,a as q,x as A,b as E,c as b,d as s,g as c,j as l,F as k,N as y,k as i,o as m,h as H,p as M,t as o,e as N,f as d,B as P,q as W}from"./index-CxIGT_a7.js";import{f as G,F as x,c as J,t as K}from"./index-BRyAIBL-.js";const O={class:"g-content"},Q={class:"search b-white"},X={class:"scroll"},Y={class:"fontWeight cell-item-info"},Z={class:"cell-item-info"},ee={class:"cell-item-info"},se={class:"cell-item-info"},te={class:"cell-item-info"},ae={class:"btns"},oe=["onClick"],ne={class:"tag-box"},le={__name:"repair",setup(ce){const r=f([]),u=f(!1),p=f(!1);P();const h=W(),C=$(),{storeUser:T}=j(C),w=q(()=>T.value.id),a=A({keyword:"",elderId:w.value,pageNum:1,pageSize:10}),_=(n=!1)=>{y.start(),n?(a.pageNum=1,r.value=[]):a.pageNum++,G(a).then(t=>{n&&(p.value=!1),r.value=r.value.concat(t.data),a.pageNum*a.pageSize>=t.total&&(p.value=!0)}).finally(()=>{u.value=!1,y.done()})},I=n=>{},F=n=>{h.push({name:"repairDetail",params:{troubleId:n.troubleId}})},S=()=>{h.push("/repair-add")},v=()=>{_(!0)};return E(()=>{_(!0)}),(n,t)=>{const V=i("van-search"),g=i("van-tag"),B=i("van-cell"),L=i("van-list"),D=i("Tabbar");return m(),b(k,null,[s("div",O,[s("div",Q,[c(V,{modelValue:a.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>a.keyword=e),placeholder:"故障单编号、设备名称、设备编号","show-action":"",onSearch:v,onCancel:v,clearable:""},{action:l(()=>[s("div",{onClick:v},"搜索")]),_:1},8,["modelValue"])]),s("div",X,[c(L,{loading:u.value,"onUpdate:loading":t[1]||(t[1]=e=>u.value=e),finished:p.value,"finished-text":"没有更多了",onLoad:_,"immediate-check":!1},{default:l(()=>[(m(!0),b(k,null,H(r.value,(e,R)=>(m(),M(B,{class:"click-cell",center:"",key:R,onClick:U=>I(e)},{title:l(()=>[s("div",Y,"故障单: "+o(e.orderId),1)]),label:l(()=>[s("div",Z,"设备名称 : "+o(e.deviceName),1),s("div",ee,"设备编号 : "+o(e.deviceNo),1),s("div",se,"故障描述 : "+o(e.reportAddress),1),s("div",te,"报障时间 : "+o(e.reportTime),1),s("div",null,[t[2]||(t[2]=s("div",{class:"line"},null,-1)),s("div",ae,[s("div",{class:"btn",onClick:U=>F(e,2)},"详情",8,oe)])]),s("div",ne,[c(g,{type:e.clientType==1?"success":"primary"},{default:l(()=>[N(o(d(x)(d(J),e.clientType)),1)]),_:2},1032,["type"]),t[3]||(t[3]=s("span",null,null,-1)),c(g,{type:e.status==0?"warning ":e.status==1||e.status==2?"success ":e.status==3?"primary ":""},{default:l(()=>[N(o(d(x)(d(K),e.status)),1)]),_:2},1032,["type"])])]),_:2},1032,["onClick"]))),128))]),_:1},8,["loading","finished"])]),s("div",{class:"footer-btn-box"},[s("div",{class:"add-btn",onClick:S},"我要报修")])]),c(D)],64)}}},de=z(le,[["__scopeId","data-v-1bd337cf"]]);export{de as default};
